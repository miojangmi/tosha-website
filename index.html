<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>$TOSH ‚Ä¢ Tosha Token</title>
  <link rel="icon" type="image/png" href="tosha_logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f7faf8;--card:#ffffff;--ink:#222;--muted:#6b7280;--brand:#00c47d;--brand2:#1d9bf0;--accent:#f59e0b;
      --radius:18px;--shadow:0 10px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header.hero{position:relative;overflow:hidden;background:linear-gradient(135deg,#aaf1c4,#7be3a0);border-radius:var(--radius);padding:48px 28px;box-shadow:var(--shadow)}
    .hero-inner{display:grid;grid-template-columns:1.4fr 1fr;gap:24px;align-items:center}
    .brand{display:flex;align-items:center;gap:16px}
    .brand img{width:84px;height:84px;border-radius:50%;box-shadow:0 6px 14px rgba(0,0,0,.12)}
    .title{font-size:40px;line-height:1.1;margin:8px 0 6px}
    .tag{color:var(--muted);font-size:16px;margin-bottom:18px}
    .cta{display:flex;flex-wrap:wrap;gap:12px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:14px;font-weight:600}
    .btn.primary{background:var(--brand);color:#fff}
    .btn.secondary{background:#111827;color:#fff}
    .btn.light{background:#fff;border:1px solid #e5e7eb}
    .pill{display:inline-block;background:#fff3;border:1px solid #0001;padding:6px 10px;border-radius:999px;font-size:12px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-top:28px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px;position:relative}
    .card::after{content:"üêæ";position:absolute;bottom:10px;right:10px;opacity:0.15;font-size:32px}
    h2{margin:0 0 12px;font-size:22px;display:flex;align-items:center;gap:8px}
    h2::before{content:"üêæ";font-size:20px;margin-right:6px}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;word-break:break-all}
    .copy{cursor:pointer;background:#111827;color:#fff;border:0;border-radius:10px;padding:8px 12px;font-weight:600}
    .list{margin:8px 0 0;padding:0;list-style:none}
    .list li{margin:8px 0;color:var(--muted);padding-left:1.6em;position:relative}
    .list li::before{content:"üêæ";position:absolute;left:0;top:0;margin-right:6px}
    footer{margin:28px 0;color:var(--muted);text-align:center}
    @media (max-width:900px){.hero-inner{grid-template-columns:1fr}.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="container">
    <header class="hero">
      <div class="hero-inner">
        <div>
          <div class="brand">
            <img src="/tosha_logo.png" alt="Tosha logo">
            <div>
              <div class="pill">$TOSH ‚Ä¢ Abstract</div>
              <h1 class="title">Tosha Token</h1>
            </div>
          </div>
          <p class="tag">A Token With Personality. <strong>Lazy.</strong> <strong>Cute.</strong> <strong>Friendly.</strong></p>
          <div class="cta">
            <a class="btn primary" href="https://t.me/tosha_x_x" target="_blank">Join Telegram</a>
            <a class="btn light" href="https://x.com/tosha_x_x" target="_blank">Follow on X</a>
          </div>
        </div>
        <div class="card">
          <h2>Tokenomics</h2>
          <ul class="list">
            <li>Total Supply: 1,000,000,000 $TOSH</li>
            <li>0% Tax ‚Ä¢ 100% Cute</li>
            <li>LP Locked ‚Ä¢ Contract Renounced</li>
          </ul>
        </div>
      </div>
    </header>

<section class="grid roadmap-frame">
  <div class="card">
    <h2>Who is Tosha?</h2>
    <p>
      Tosha is the sleepy orange cat who accidentally launched a token.  
      He naps, we build. If you like <em>chill energy</em>, cute art, and honest vibes ‚Äî welcome home. üêæ
    </p>
  </div>

  <div class="card roadmap-card">
    <h2>Roadmap üêæ</h2>
    <ul class="list">
      <li><strong>Phase 1 ‚Äî Nap & Launch Token:</strong> Roll out of bed, deploy $TOSH, gather the first diamond-pawed believers.</li>
      <li><strong>Phase 2 ‚Äî Eat Snacks & Get Holders:</strong> Eat snacks, stack holders, meme so hard the internet notices.</li>
      <li><strong>Phase 3 ‚Äî World Domination (via Cuteness):</strong> Spread cuteness like wildfire, partner with legendary projects, hit trending multiple times.</li>
      <li><strong>Phase 4 ‚Äî Sleep Again:</strong> Nap on the moon, let holders enjoy the view.</li>
    </ul>
  </div>
</section>

<style>
 /* All cards inside the roadmap section get same border */
.roadmap-frame .card {
  border: 2px solid #b2e0b2; /* same green as right card */
  border-radius: 20px;
  padding: 20px;
}

/* Right card stays green */
.roadmap-card {
  background-color: #e6f7e6; /* light green */
  position: relative;
}

/* Pawprint Decoration */
.roadmap-card::before {
  content: "üêæ";
  font-size: 2rem;
  position: absolute;
  top: 15px;
  right: 20px;
}

.roadmap-card h2 {
  color: #2b7a2b; /* deep green */
  font-weight: 800;
}

.roadmap-card ul li {
  margin-bottom: 12px;
  line-height: 1.4em;
}

.roadmap-card strong {
  color: #1f5e1f;
}

  /* ‚¨áÔ∏è ADD THESE LINES AT THE END */
.game{
  margin: 56px auto 24px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  max-width: 760px;
}

.game-card{
  border: 2px solid #b2e0b2;
  border-radius: 20px;
  padding: 20px;
  text-align: center;
  background: #fff;
}

#gameCanvas{
  display: block;
  margin: 8px auto 0;
}

.game-card .hint{
  color:#667085;
  margin:8px 0 0;
}

.game-card .pad{
  margin-top:10px;
}
  /* Game + Leaderboard layout */
.game.two-col{
  margin: 56px auto 24px;      /* separates from sections above & centers */
  max-width: 980px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  align-items: start;
}
@media (max-width: 900px){
  .game.two-col{ grid-template-columns: 1fr; }
}

/* Cards styling (match your theme) */
.game-card, .leaderboard-card{
  border: 2px solid #b2e0b2;
  border-radius: 20px;
  padding: 20px;
}

/* Center canvas nicely */
#gameCanvas{ display:block; margin:8px auto 0; }
.game-card .hint{ color:#667085; margin:8px 0 0; }
.game-card .pad{ margin-top:10px; }

/* Leaderboard list */
.lb{ margin:8px 0; padding-left:20px; }
.lb li{ margin:6px 0; }
</style>

<section class="game two-col">
  <!-- LEFT: Game -->
  <div class="card game-card">
    <h2>Feed Tosha Mini-Game</h2>

    <canvas id="gameCanvas" width="320" height="320" tabindex="0" style="outline:none"></canvas>

    <div class="hud" style="text-align:center;margin-top:8px;">
      <span id="timer" style="font-weight:700;">01:00</span>
      <button id="startBtn" class="btn light" style="margin-left:8px;">Start</button>
      <button id="restartBtn" class="btn light" style="margin-left:8px; display:none;">Restart</button>
    </div>

    <p class="hint">Use arrow keys to move Tosha üêæ</p>
    <div class="pad">
      <button onclick="press('ArrowUp')">‚¨ÜÔ∏è</button>
      <button onclick="press('ArrowLeft')">‚¨ÖÔ∏è</button>
      <button onclick="press('ArrowDown')">‚¨áÔ∏è</button>
      <button onclick="press('ArrowRight')">‚û°Ô∏è</button>
    </div>

    <div style="margin-top:14px;">
      <button id="saveScoreBtn" class="btn light">Save Score to Leaderboard</button>
    </div>
  </div>

  <!-- RIGHT: Leaderboard -->
  <aside class="card leaderboard-card">
    <h2>Leaderboard</h2>
    <ol id="leaderboard" class="lb"></ol>
  </aside>
</section>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { initializeAppCheck, ReCaptchaV3Provider } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app-check.js";
  import {
    getFirestore, collection, doc, getDoc, setDoc, serverTimestamp,
    query, orderBy, limit, onSnapshot
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAbiPviAVeEA9EHPczK0pUIpSDOWaVUOVQ",
    authDomain: "tosha-e8f91.firebaseapp.com",
    projectId: "tosha-e8f91",
    storageBucket: "tosha-e8f91.firebasestorage.app",
    messagingSenderId: "151122614360",
    appId: "1:151122614360:web:ac3fa952e2d4fde01b522d"
  };

  const app = initializeApp(firebaseConfig);

  initializeAppCheck(app, {
    provider: new ReCaptchaV3Provider('6LeBOqArAAAAAOj5LSuGNQ7a1wAQdNlX67Y2uYa4'),
    isTokenAutoRefreshEnabled: true
  });

  const auth = getAuth(app);
  signInAnonymously(auth).catch(console.error);

  const db = getFirestore(app);
  const scoresCol = collection(db, "tosha_scores");

  // LIVE leaderboard
  const lbList = document.getElementById("leaderboard");
  const topQ = query(scoresCol, orderBy("score", "desc"), limit(10));
  onSnapshot(topQ, (snap) => {
    lbList.innerHTML = "";
    let rank = 1;
    snap.forEach(docSnap => {
      const { name, score } = docSnap.data();
      const li = document.createElement("li");
      li.textContent = `#${rank++} ${name || "Anon Cat"} ‚Äî ${score}`;
      lbList.appendChild(li);
    });
  });

  // Get/remember display name
  function getPlayerName() {
    let n = (localStorage.getItem("tosha_player_name") || "").trim();
    if (!n) {
      n = prompt("Enter a name for the leaderboard (max 16 chars):", "ToshaFan") || "";
      n = n.trim().slice(0,16).replace(/\//g,'');
      if (!n) return null;
      localStorage.setItem("tosha_player_name", n);
    } else {
      n = n.slice(0,16).replace(/\//g,'');
    }
    return n;
  }

  // ‚úÖ Make saveScore return a Promise
  window.saveScore = async function(score){
    return new Promise(async (resolve, reject) => {
      try {
        const user = auth.currentUser;
        if (!user) { alert("Signing you in‚Ä¶ try again in a second."); return reject(); }

        const name = getPlayerName();
        if (!name) return reject();

        const uid = user.uid;
        const ref = doc(scoresCol, uid);
        const snap = await getDoc(ref);
        const newScore = Math.max(0, Math.floor(score));
        const prev = snap.exists() ? (snap.data().score || 0) : -1;

        if (!snap.exists() || newScore > prev) {
          await setDoc(ref, { name, score: newScore, updatedAt: serverTimestamp() }, { merge: false });
        } else {
          // allow name refresh without lowering score
          await setDoc(ref, { name, score: prev, updatedAt: serverTimestamp() }, { merge: true });
        }
        resolve();
      } catch (e) {
        console.error(e);
        reject(e);
      }
    });
  };

  // üîß Hide manual Save button (since we auto-save)
  const saveBtn = document.getElementById("saveScoreBtn");
  if (saveBtn) {
    saveBtn.style.display = "none";
    saveBtn.disabled = true;
    onAuthStateChanged(auth, (u) => { saveBtn.disabled = !u; });
  }

  // Keep manual hook (won't show anyway)
  document.getElementById("saveScoreBtn")?.addEventListener("click", ()=>{
    if (window.currentScore == null) return alert("Play first, then save!");
    window.saveScore(window.currentScore);
  });

  // Helper for highlighting after save
  window.highlightPlayer = function () {
    const playerName = localStorage.getItem("tosha_player_name") || "";
    if (!playerName || !lbList) return;
    const items = lbList.querySelectorAll("li");
    items.forEach(li => {
      if (li.textContent.includes(playerName)) {
        li.style.background = "#fff9c4";
        li.style.transition = "background 0.5s ease";
        setTimeout(() => li.style.background = "", 2000);
        li.scrollIntoView({ behavior: "smooth", block: "center" });
      }
    });
  };
</script>
    
<script>
function press(k){
  if (window.__gameOver) return; // block presses when game over/paused
  window.dispatchEvent(new KeyboardEvent('keydown',{key:k}));
  setTimeout(()=>window.dispatchEvent(new KeyboardEvent('keyup',{key:k})),120);
}
</script>

<script>
window.addEventListener('load', () => {
  const c = document.getElementById('gameCanvas');
  const ctx = c.getContext('2d');
  c.focus();

  // ---- TIMER / GAME STATE ----
  const TIME_LIMIT_MS = 60_000;   // change duration here (e.g., 90_000 for 1.5 min)
  let startTime = null;
  let remainingMs = TIME_LIMIT_MS;
  let gameOver = true;            // start paused
  window.__gameOver = true;       // also exported for press()

  const timerEl = document.getElementById('timer');
  const startBtn = document.getElementById('startBtn');
  const restartBtn = document.getElementById('restartBtn');

  function formatTime(ms){
    const s = Math.max(0, Math.ceil(ms/1000));
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s % 60).padStart(2,'0');
    return `${mm}:${ss}`;
  }
  function updateTimerUI(){
    if (timerEl) timerEl.textContent = formatTime(remainingMs);
  }

  function startGame(){
    // reset score & reposition snack for fresh run
    score = 0;
    window.currentScore = 0;
    snack.x = 20 + Math.random() * (c.width  - 40);
    snack.y = 20 + Math.random() * (c.height - 40);

    // reset timer
    startTime = performance.now();
    remainingMs = TIME_LIMIT_MS;
    gameOver = false;
    window.__gameOver = false;
    updateTimerUI();

    // UI
    if (startBtn) startBtn.style.display = 'none';
    if (restartBtn) restartBtn.style.display = 'inline-block';
  }

function endGame(){
  gameOver = true;
  window.__gameOver = true;
  updateTimerUI();

  // Auto-save when time is up, then highlight on the leaderboard
  if (window.currentScore != null && typeof window.saveScore === 'function') {
    window.saveScore(window.currentScore).then(() => {
      if (typeof window.highlightPlayer === 'function') {
        window.highlightPlayer();
      }
    }).catch(()=>{ /* ignore */ });
  }

  alert(`Time! Final score: ${score}`);
}

  // Buttons
  startBtn?.addEventListener('click', startGame);
  restartBtn?.addEventListener('click', startGame);

  // ---- ASSETS ----
  const sheet = new Image();
  sheet.src = 'cat_walk.png';
  sheet.onerror = () => console.error('‚ùå cat_walk not found at:', sheet.src);

  const snackImg = new Image();
  snackImg.onload  = () => console.log('‚úÖ snack loaded', snackImg.naturalWidth, snackImg.naturalHeight);
  snackImg.onerror = () => console.error('‚ùå snack not found at', snackImg.src);
  snackImg.src = 'snack.png';

  // ---- STATE ----
  let x = c.width/2, y = c.height/2, score = 0, dir = 1;
  window.currentScore = 0; // leaderboard visibility
  const keys = {};
  const COLS = 3;
  const FRAME_MS = 100;

  let frame = 0, acc = 0, FW = 0, FH = 0;
  let spriteReady = false;

  sheet.onload = () => {
    FW = sheet.width / COLS;
    FH = sheet.height;
    spriteReady = true;
    console.log('‚úÖ cat sheet loaded:', sheet.width+'x'+sheet.height, 'FW', FW, 'FH', FH);
  };

  // snack
  let snack = { x: 60, y: 60 };

  function update(dt){
    // stop logic when game is over
    if (gameOver) return;

    // timer tick
    const now = performance.now();
    remainingMs = TIME_LIMIT_MS - (now - startTime);
    if (remainingMs <= 0){
      remainingMs = 0;
      endGame();
      return;
    }

    const sp = 3;
    const moving = keys.ArrowUp || keys.ArrowDown || keys.ArrowLeft || keys.ArrowRight;

    if (keys.ArrowUp)    y = Math.max(10, y - sp);
    if (keys.ArrowDown)  y = Math.min(c.height - 10, y + sp);
    if (keys.ArrowLeft)  { x = Math.max(10, x - sp); dir = -1; }
    if (keys.ArrowRight) { x = Math.min(c.width - 10, x + sp); dir =  1; }

    if (moving) {
      acc += dt;
      if (acc >= FRAME_MS) { acc -= FRAME_MS; frame = (frame + 1) % COLS; }
    } else {
      frame = 0;
    }

    if (Math.hypot(x - snack.x, y - snack.y) < 28) {
      score++;
      window.currentScore = score;
      snack.x = 20 + Math.random() * (c.width  - 40);
      snack.y = 20 + Math.random() * (c.height - 40);
    }
  }

  function drawCat(){
    if (spriteReady) {
      const TARGET_H = 110;
      const scale = TARGET_H / FH;
      const TARGET_W = FW * scale;
      const sx = frame * FW;

      ctx.save();
      ctx.translate(x, y);
      if (dir === -1) ctx.scale(-1, 1);
      ctx.drawImage(sheet, sx, 0, FW, FH, -TARGET_W/2, -TARGET_H/2, TARGET_W, TARGET_H);
      ctx.restore();
    } else {
      // fallback while loading
      ctx.fillStyle = '#f59e0b';
      ctx.beginPath(); ctx.arc(x, y, 20, 0, Math.PI*2); ctx.fill();
    }
  }

  function drawSnack(){
    const size = 36;
    if (snackImg.complete && snackImg.naturalWidth > 0) {
      ctx.drawImage(snackImg, snack.x - size/2, snack.y - size/2, size, size);
    } else {
      ctx.fillStyle = '#00c47d';
      ctx.beginPath(); ctx.arc(snack.x, snack.y, size/2, 0, Math.PI*2); ctx.fill();
    }
  }

  let last = performance.now();
  function loop(now = performance.now()){
    const dt = now - last; last = now;
    update(dt);

    ctx.clearRect(0,0,c.width,c.height);
    drawSnack();
    drawCat();
    ctx.fillStyle = '#222'; ctx.font = '14px Poppins, sans-serif';
    ctx.fillText('Score: ' + score, 10, 20);

    updateTimerUI(); // keep DOM timer fresh

    requestAnimationFrame(loop);
  }
  loop();

  // controls
  window.addEventListener('keydown', e => {
    if (gameOver) return; // ignore when not running
    if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)) {
      keys[e.key] = true; e.preventDefault();
    }
  });
  window.addEventListener('keyup', e => { keys[e.key] = false; });
});
</script>

    
    <section class="full">
      <div class="card">
        <h2>Meme Gallery</h2>
        <p>Coming soon ‚Äî the fluffiest memes on the blockchain. üò∏</p>
      </div>
    </section>

    <footer>
      ¬© 2025 Tosha Token ‚Äî Too lazy to rug. Too fluffy to fail.
    </footer>
  </div>

  <script>
    function copyCA(){
      const ca = document.getElementById('ca').innerText.trim();
      navigator.clipboard.writeText(ca).then(()=>{
        const btn = document.querySelector('.copy');
        const old = btn.textContent; btn.textContent='Copied! ‚úÖ';
        setTimeout(()=>btn.textContent=old, 1200);
      })
    }
  </script>
</body>
</html>













































